import{i as F,r as b,k as Y,o as _,c as T,w as l,a as e,m as $,bl as P,as as C,u as n,s as te,b as h,d as le,E as G,bu as J,bv as Q,e as z,f as W,t as oe,g as B,h as f,j as U,_ as ae,p as ne,q as R,v as ie,bs as de,bt as ue}from"./index.370711b9.js";import{E as K,a as j,b as X,c as se,d as re,f as pe,e as me}from"./el-overlay.fe961f6c.js";import"./vue-json-viewer.e75741dc.js";const _e=h("Search"),ce=h("Reset"),fe={emits:["searchEmit"],setup(V,{emit:w}){const I=F("$axios"),x=b([]),c=b(null),u=b({id:null,name:null,httpMethod:null}),r=()=>{c.value.resetFields()};function g(){w("searchEmit",le.trimObjectValue(u.value))}function M(){I.get("/api-definition/getHttpMethods").then(d=>{x.value=d.data})}return Y(()=>{M()}),(d,i)=>{const t=G,s=K,S=J,p=Q,D=j,A=X;return _(),T(A,{ref_key:"searchFormRef",ref:c,model:u.value,inline:!0},{default:l(()=>[e(s,{label:"ID",prop:"id"},{default:l(()=>[e(t,{modelValue:u.value.id,"onUpdate:modelValue":i[0]||(i[0]=m=>u.value.id=m),clearable:""},null,8,["modelValue"])]),_:1}),e(s,{label:"NAME",prop:"name"},{default:l(()=>[e(t,{modelValue:u.value.name,"onUpdate:modelValue":i[1]||(i[1]=m=>u.value.name=m),clearable:""},null,8,["modelValue"])]),_:1}),e(s,{label:"HTTP_METHOD",prop:"httpMethod"},{default:l(()=>[e(p,{modelValue:u.value.httpMethod,"onUpdate:modelValue":i[2]||(i[2]=m=>u.value.httpMethod=m),clearable:"",filterable:""},{default:l(()=>[(_(!0),$(C,null,P(x.value,m=>(_(),T(S,{key:m,label:m,value:m},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:l(()=>[e(D,{type:"primary",icon:n(te),onClick:i[3]||(i[3]=m=>g())},{default:l(()=>[_e]),_:1},8,["icon"]),e(D,{type:"primary",onClick:i[4]||(i[4]=m=>r())},{default:l(()=>[ce]),_:1})]),_:1})]),_:1},8,["model"])}}},be={class:"dialog-footer"},he=h("Cancel"),ve=h("Reset"),ye=h("Confirm"),Ee={props:{data:Object},emits:["closeDialogEmit","refreshEmit"],setup(V,{emit:w}){const I=V,x=z(),{activedProjectId:c}=W(x),u=F("$axios"),r=b("200px"),g=b([]),M=b([]),d=oe(I,"data"),i=b(null),t=B({entity:{id:null,name:null,httpMethod:null,url:null,requestMediaType:null,headersSample:null,bodyArgsSample:null,description:null,projectId:null}}),s=B({name:[{required:!0,message:"Please input name",trigger:"blur"},{min:1,max:50,message:"Length should be 1 to 50",trigger:"blur"}],httpMethod:[{required:!0}],url:[{required:!0}],requestMediaType:[{required:!0}]}),S=()=>{i.value.validate((v,a)=>{v?t.entity.id?u.put("/api-definition",t.entity).then(y=>{k(),q()}):u.post("/api-definition",t.entity).then(y=>{k(),q()}):console.log("error submit!",a)})};function p(){u.get("/api-definition/getHttpMethods").then(v=>{g.value=v.data})}function D(){u.get("/api-definition/getMediaTypes").then(v=>{M.value=v.data})}function A(){p(),D(),d.value.id?u.get("/api-definition/"+d.value.id).then(v=>{t.entity=v.data,t.entity.projectId=c.value}):t.entity={projectId:c.value}}function m(){i.value.resetFields()}function k(){w("closeDialogEmit")}function q(){w("refreshEmit")}return(v,a)=>{const y=G,E=K,L=J,N=Q,Z=X,O=j,ee=se;return _(),T(ee,{modelValue:n(d).visiable,"onUpdate:modelValue":a[11]||(a[11]=o=>n(d).visiable=o),onOpen:A,title:n(d).id?"Edit":"Add"},{footer:l(()=>[f("span",be,[e(O,{onClick:a[8]||(a[8]=o=>k())},{default:l(()=>[he]),_:1}),n(d).id?U("",!0):(_(),T(O,{key:0,type:"primary",onClick:a[9]||(a[9]=o=>m())},{default:l(()=>[ve]),_:1})),e(O,{type:"primary",onClick:a[10]||(a[10]=o=>S())},{default:l(()=>[ye]),_:1})])]),default:l(()=>[e(Z,{ref_key:"formRef",ref:i,model:n(t).entity,rules:n(s)},{default:l(()=>[n(d).id?(_(),T(E,{key:0,label:"ID",prop:"id","label-width":r.value},{default:l(()=>[e(y,{modelValue:n(t).entity.id,"onUpdate:modelValue":a[0]||(a[0]=o=>n(t).entity.id=o),disabled:"",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])):U("",!0),e(E,{label:"NAME",prop:"name","label-width":r.value},{default:l(()=>[e(y,{modelValue:n(t).entity.name,"onUpdate:modelValue":a[1]||(a[1]=o=>n(t).entity.name=o),clearable:"",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),e(E,{label:"HTTP_METHOD",prop:"httpMethod","label-width":r.value},{default:l(()=>[e(N,{modelValue:n(t).entity.httpMethod,"onUpdate:modelValue":a[2]||(a[2]=o=>n(t).entity.httpMethod=o),clearable:"",filterable:""},{default:l(()=>[(_(!0),$(C,null,P(g.value,o=>(_(),T(L,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),e(E,{label:"API_URL",prop:"url","label-width":r.value},{default:l(()=>[e(y,{modelValue:n(t).entity.url,"onUpdate:modelValue":a[3]||(a[3]=o=>n(t).entity.url=o),clearable:"",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),e(E,{label:"REQUEST_MEDIA_TYPE",prop:"requestMediaType","label-width":r.value},{default:l(()=>[e(N,{modelValue:n(t).entity.requestMediaType,"onUpdate:modelValue":a[4]||(a[4]=o=>n(t).entity.requestMediaType=o),clearable:"",filterable:""},{default:l(()=>[(_(!0),$(C,null,P(M.value,o=>(_(),T(L,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),e(E,{label:"HEADERS_SAMPLE",prop:"headersSample","label-width":r.value},{default:l(()=>[e(y,{modelValue:n(t).entity.headersSample,"onUpdate:modelValue":a[5]||(a[5]=o=>n(t).entity.headersSample=o),type:"textarea",clearable:"",autocomplete:"off",placeholder:'For Example: {"token": "${token}"}'},null,8,["modelValue"])]),_:1},8,["label-width"]),e(E,{label:"BODY_ARGS_SAMPLE",prop:"bodyArgsSample","label-width":r.value},{default:l(()=>[e(y,{modelValue:n(t).entity.bodyArgsSample,"onUpdate:modelValue":a[6]||(a[6]=o=>n(t).entity.bodyArgsSample=o),type:"textarea",clearable:"",autocomplete:"off",placeholder:'For Example: {"id": 100, "name": "Jack"}'},null,8,["modelValue"])]),_:1},8,["label-width"]),e(E,{label:"DESCRIPTION",prop:"description","label-width":r.value},{default:l(()=>[e(y,{modelValue:n(t).entity.description,"onUpdate:modelValue":a[7]||(a[7]=o=>n(t).entity.description=o),type:"textarea",clearable:"",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}};const H=V=>(de("data-v-095d63a6"),V=V(),ue(),V),Ve={class:"flex",style:{margin:"10px 10px"}},ge=h("\u6DFB\u52A0"),Me=H(()=>f("span",{style:{"font-weight":"bold"}},"HEADERS_SAMPLE: ",-1)),Te=H(()=>f("span",{style:{"font-weight":"bold"}},"BODY_ARGS_SAMPLE: ",-1)),we=H(()=>f("span",{style:{"font-weight":"bold"}},"DESCRIPTION: ",-1)),xe={setup(V){const w=z(),{activedProjectId:I}=W(w),x=F("$axios"),c=b({visiable:!1,id:null}),u=b([]);function r(d){d=d||{},d.projectId=I.value,x.get("/api-definition/page",{params:d}).then(i=>{u.value=i.data.records})}function g(d){c.value.id=d||null,M(!0)}function M(d){c.value.visiable=d}return Y(()=>{r()}),(d,i)=>{const t=j,s=re,S=pe;return me,_(),$("div",null,[e(fe,{onSearchEmit:r}),f("div",Ve,[e(t,{type:"primary",icon:n(ne),onClick:i[0]||(i[0]=p=>g())},{default:l(()=>[ge]),_:1},8,["icon"])]),e(S,{data:u.value,stripe:"","highlight-current-row":"",height:"calc(100vh - 60px - 40px - 150px)"},{default:l(()=>[e(s,{type:"expand"},{default:l(p=>[e(S,{data:[u.value[p.$index]],stripe:""},{default:l(()=>[e(s,{prop:"projectId",label:"PROJECT_ID",width:"180"}),e(s,{prop:"createTime",label:"CREATE_TIME",width:"180"}),e(s,{prop:"updateTime",label:"UPDATE_TIME",width:"180"})]),_:2},1032,["data"]),f("div",null,[f("p",null,[Me,h(R(p.row.headersSample),1)]),f("p",null,[Te,h(R(p.row.bodyArgsSample),1)]),f("p",null,[we,h(R(p.row.description),1)])])]),_:1}),e(s,{prop:"id",label:"ID",width:"180"}),e(s,{prop:"name",label:"NAME"}),e(s,{prop:"httpMethod",label:"HTTP_METHOD",width:"130"}),e(s,{prop:"url",label:"API_URL"}),e(s,{prop:"requestMediaType",label:"REQUEST_MEDIA_TYPE",width:"240"}),e(s,{fixed:"right",label:"Operations",width:"120"},{default:l(p=>[e(t,{type:"primary",icon:n(ie),circle:"",size:"small",title:"Edit",onClick:D=>g(p.row.id)},null,8,["icon","onClick"]),U("",!0)]),_:1})]),_:1},8,["data"]),e(Ee,{data:c.value,onCloseDialogEmit:i[1]||(i[1]=p=>M(!1)),onRefreshEmit:i[2]||(i[2]=p=>r())},null,8,["data"])])}}};var $e=ae(xe,[["__scopeId","data-v-095d63a6"]]);export{$e as default};
